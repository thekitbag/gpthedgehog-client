System.register(["./index-legacy-fc8e2e6c.js"],(function(e,t){"use strict";var r,n;return{setters:[e=>{r=e.o,n=e.C}],execute:function(){var t,a={exports:{}},o={};
/**
       * @license React
       * react-jsx-runtime.production.min.js
       *
       * Copyright (c) Facebook, Inc. and its affiliates.
       *
       * This source code is licensed under the MIT license found in the
       * LICENSE file in the root directory of this source tree.
       */a.exports=function(){if(t)return o;t=1;var e=n,r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var a,o={},l=null,u=null;for(a in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,a)&&!c.hasOwnProperty(a)&&(o[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===o[a]&&(o[a]=t[a]);return{$$typeof:r,type:e,key:l,ref:u,props:o,_owner:s.current}}return o.Fragment=a,o.jsx=l,o.jsxs=l,o}();var i=a.exports;const s=(e,t,r,n,a,o,i,s=0,c=1)=>{const l=t.height/2,u=t.getContext("2d");if(!u)return;u.clearRect(0,0,t.width,t.height),"transparent"!==a&&(u.fillStyle=a,u.fillRect(0,0,t.width,t.height));const f=(s||0)/c;e.forEach(((t,a)=>{const s=a/e.length,c=f>s;u.fillStyle=c&&i?i:o;const h=a*(r+n),d=l+t.min,g=r,m=l+t.max-d;u.beginPath(),u.roundRect(h,d,g,m,50),u.fill()}))};e({LiveAudioVisualizer:({mediaRecorder:e,width:t="100%",height:n="100%",barWidth:a=2,gap:o=1,backgroundColor:s="transparent",barColor:c="rgb(160, 198, 255)",fftSize:l=1024,maxDecibels:u=-10,minDecibels:f=-90,smoothingTimeConstant:h=.4})=>{const[d]=r.useState((()=>new AudioContext)),[g,m]=r.useState(),y=r.useRef(null);r.useEffect((()=>{if(!e.stream)return;const t=d.createAnalyser();m(t),t.fftSize=l,t.minDecibels=f,t.maxDecibels=u,t.smoothingTimeConstant=h,d.createMediaStreamSource(e.stream).connect(t)}),[e.stream]),r.useEffect((()=>{(null!=g?g:"recording"===e.state)&&p()}),[g,e.state]);const p=r.useCallback((()=>{if(!g)return;const t=new Uint8Array(null==g?void 0:g.frequencyBinCount);"recording"===e.state?(null==g||g.getByteFrequencyData(t),b(t),requestAnimationFrame(p)):"paused"===e.state?b(t):"inactive"===e.state&&"closed"!==d.state&&d.close()}),[g]),b=e=>{if(!y.current)return;const t=((e,t,r,n)=>{let a=t/(r+n),o=Math.floor(e.length/a);a>e.length&&(a=e.length,o=1);const i=[];for(let s=0;s<a;s++){let t=0;for(let r=0;r<o&&s*o+r<e.length;r++)t+=e[s*o+r];i.push(t/o)}return i})(e,y.current.width,a,o);((e,t,r,n,a,o)=>{const i=t.height/2,s=t.getContext("2d");s&&(s.clearRect(0,0,t.width,t.height),"transparent"!==a&&(s.fillStyle=a,s.fillRect(0,0,t.width,t.height)),e.forEach(((e,t)=>{s.fillStyle=o;const a=t*(r+n),c=i-e/2,l=r,u=e||1;s.beginPath(),s.roundRect(a,c,l,u,50),s.fill()})))})(t,y.current,a,o,s,c)};return i.jsx("canvas",{ref:y,width:t,height:n,style:{aspectRatio:"unset"}})},AudioVisualizer:({blob:e,width:t,height:n,barWidth:a=2,gap:o=1,currentTime:c,style:l,backgroundColor:u="transparent",barColor:f="rgb(184, 184, 184)",barPlayedColor:h="rgb(160, 198, 255)"})=>{const d=r.useRef(null),[g,m]=r.useState([]),[y,p]=r.useState(0);return r.useEffect((()=>{(async()=>{if(!d.current)return;if(!e){const e=Array.from({length:100},(()=>({max:0,min:0})));return void s(e,d.current,a,o,u,f,h)}const r=await e.arrayBuffer();await(new AudioContext).decodeAudioData(r,(e=>{if(!d.current)return;p(e.duration);const r=((e,t,r,n,a)=>{const o=e.getChannelData(0),i=r/(n+a),s=Math.floor(o.length/i),c=t/2;let l=[],u=0;for(let f=0;f<i;f++){const t=[];let r=0;const n=[];let a=0;for(let l=0;l<s&&f*s+l<e.length;l++){const e=o[f*s+l];e<=0&&(t.push(e),r++),e>0&&(n.push(e),a++)}const i=t.reduce(((e,t)=>e+t),0)/r,c={max:n.reduce(((e,t)=>e+t),0)/a,min:i};c.max>u&&(u=c.max),Math.abs(c.min)>u&&(u=Math.abs(c.min)),l.push(c)}if(.8*c>u*c){const e=.8*c/u;l=l.map((t=>({max:t.max*e,min:t.min*e})))}return l})(e,n,t,a,o);m(r),s(r,d.current,a,o,u,f,h)}))})()}),[e,d.current]),r.useEffect((()=>{d.current&&s(g,d.current,a,o,u,f,h,c,y)}),[c,y]),i.jsx("canvas",{ref:d,width:t,height:n,style:{...l}})}})}}}));
